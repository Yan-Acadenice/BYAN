<mxfile host="Electron" modified="2027-01-15T10:00:00.000Z" agent="5.0" version="22.1.0" etag="MLD-CORE27-AC2027-v1" type="device">
  <diagram id="MLD-CORE27-AC2027" name="MLD ACCORD-CADRE 2027 - CENTRALIS">
    <mxGraphModel dx="2400" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3500" pageHeight="2400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- TITRE PRINCIPAL -->
        <mxCell id="titre-principal" value="MLD ACCORD-CADRE 2027 - CENTRALIS&#xa;Bases CORE27 (Permanente) + AC_2027 (Temporaire)&#xa;Architecture Multi-DB | Greffe SÃ©lective Gagnants&#xa;ValidÃ© 2026-02-05 | PostgreSQL 14+" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#1A5490;" vertex="1" parent="1">
          <mxGeometry x="800" y="20" width="1800" height="100" as="geometry" />
        </mxCell>
        
        <!-- ZONE CORE27 - FOND BLEU -->
        <mxCell id="zone-core27-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4F8;strokeColor=#2874A6;strokeWidth=3;dashed=0;opacity=40;" vertex="1" parent="1">
          <mxGeometry x="50" y="180" width="1500" height="1850" as="geometry" />
        </mxCell>
        
        <mxCell id="zone-core27-label" value="DATABASE CORE27 (Permanente 2027-2029)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#2874A6;" vertex="1" parent="1">
          <mxGeometry x="450" y="200" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- ZONE AC_2027 - FOND ORANGE -->
        <mxCell id="zone-ac2027-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FEF9E7;strokeColor=#D68910;strokeWidth=3;dashed=0;opacity=40;" vertex="1" parent="1">
          <mxGeometry x="1650" y="180" width="1500" height="1850" as="geometry" />
        </mxCell>
        
        <mxCell id="zone-ac2027-label" value="DATABASE AC_2027 (Temporaire 3 mois)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#D68910;" vertex="1" parent="1">
          <mxGeometry x="2150" y="200" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- ANNOTATION MIGRATION (en haut CORE27) -->
        <mxCell id="annot-migration" value="ðŸ”„ MIGRATION JAN 2027&#xa;âœ… entreprises â† core25 (TOUTES)&#xa;âœ… entites â† core25 (TOUTES) + ac_2027 (gagnantes)&#xa;âœ… contrats â† CrÃ©Ã©s depuis ac_2027&#xa;âœ… lot_contrat â† CrÃ©Ã©s depuis ac_2027.classements_candidatures" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;align=left;verticalAlign=top;fontSize=11;fontFamily=Arial;spacing=8;" vertex="1" parent="1">
          <mxGeometry x="100" y="250" width="450" height="120" as="geometry" />
        </mxCell>
        
        <!-- ANNOTATION GREFFE (entre les zones) -->
        <mxCell id="annot-greffe" value="âš ï¸ GREFFE SÃ‰LECTIVE&#xa;&#xa;Seules les entitÃ©s avec â‰¥1 candidature&#xa;gagnÃ©e (Rang 1-3) sont greffÃ©es&#xa;dans core27 avec leurs contrats.&#xa;&#xa;Groupements perdants â†’ Dissous" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontFamily=Arial;" vertex="1" parent="1">
          <mxGeometry x="1380" y="800" width="320" height="140" as="geometry" />
        </mxCell>
        
        <!-- ========== CORE27 TABLES ========== -->
        
        <!-- GROUPE: IdentitÃ© & Profils -->
        <mxCell id="groupe-identite-label" value="ðŸ“˜ Groupe: IdentitÃ© &amp; Profils" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#2874A6;" vertex="1" parent="1">
          <mxGeometry x="100" y="400" width="300" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: entreprises -->
        <mxCell id="table-entreprises" value="&lt;b style=&quot;font-size:12pt&quot;&gt;entreprises&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;siret (VARCHAR(14) UNIQUE NOT NULL)&#xa;nom (VARCHAR(255) NOT NULL)&#xa;rcs (VARCHAR(50))&#xa;statut_juridique (VARCHAR(100))&#xa;capital (DECIMAL(12,2))&#xa;progression (INTEGER CHECK 0-100)&#xa;interesse_accord_cadre (BOOLEAN)&#xa;pays (VARCHAR(2) DEFAULT 'FR')&#xa;ðŸ”— id_adresses (FK â†’ adresses)&#xa;ðŸ”— id_presentations (FK â†’ presentations)&#xa;ðŸ”— id_iban (FK â†’ iban)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ MigrÃ©es depuis core25" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="100" y="435" width="280" height="260" as="geometry" />
        </mxCell>
        
        <!-- TABLE: entites -->
        <mxCell id="table-entites" value="&lt;b style=&quot;font-size:12pt&quot;&gt;entites&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;nom (VARCHAR(255) NOT NULL)&#xa;type (VARCHAR(20) CHECK)&#xa;   IN ('solo', 'groupement')&#xa;visible (BOOLEAN)&#xa;interesse_accord_cadre (BOOLEAN)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ MigrÃ©es depuis core25&#xa;   + greffÃ©es depuis ac_2027&#xa;   (gagnantes)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="430" y="435" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- TABLE: entites_entreprises (PIVOT) -->
        <mxCell id="table-entites-entreprises" value="&lt;b style=&quot;font-size:12pt&quot;&gt;entites_entreprises&lt;/b&gt; (PIVOT)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entite_id (FK â†’ entites.id)&#xa;ðŸ”— entreprise_id (FK â†’ entreprises.id)&#xa;mandataire (BOOLEAN)&#xa;ordre (SMALLINT)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(entite_id, entreprise_id)&#xa;ðŸ”’ Trigger: 1 seul mandataire/entitÃ©" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="100" y="730" width="280" height="180" as="geometry" />
        </mxCell>
        
        <!-- GROUPE: RÃ©fÃ©rentiels -->
        <mxCell id="groupe-ref-label" value="ðŸ“˜ Groupe: RÃ©fÃ©rentiels" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#2874A6;" vertex="1" parent="1">
          <mxGeometry x="760" y="435" width="300" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: lots_technique -->
        <mxCell id="table-lots-technique" value="&lt;b style=&quot;font-size:12pt&quot;&gt;lots_technique&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (SERIAL PK)&#xa;code (VARCHAR(10) UNIQUE)&#xa;   ex: '101', '202'&#xa;libelle (VARCHAR(255))&#xa;description (TEXT)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ 23 lots BTP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="760" y="470" width="280" height="150" as="geometry" />
        </mxCell>
        
        <!-- TABLE: departements -->
        <mxCell id="table-departements" value="&lt;b style=&quot;font-size:12pt&quot;&gt;departements&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (SERIAL PK)&#xa;numero (VARCHAR(3) UNIQUE)&#xa;   ex: '75', '92', '974'&#xa;nom (VARCHAR(100))&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ 101 dÃ©partements&#xa;   (96 + 5 DROM)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1090" y="470" width="280" height="150" as="geometry" />
        </mxCell>
        
        <!-- TABLE: lots_departements -->
        <mxCell id="table-lots-departements" value="&lt;b style=&quot;font-size:12pt&quot;&gt;lots_departements&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— lot_technique_id (FK â†’ lots_technique)&#xa;ðŸ”— departement_id (FK â†’ departements)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(lot_technique_id, departement_id)&#xa;ðŸ“ LOT = Lot Technique + DÃ©partement&#xa;   (ex: 202-75)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="925" y="660" width="280" height="170" as="geometry" />
        </mxCell>
        
        <!-- GROUPE: Contrats & Classements -->
        <mxCell id="groupe-contrats-label" value="ðŸ“˜ Groupe: Contrats &amp; Classements" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#2874A6;" vertex="1" parent="1">
          <mxGeometry x="100" y="960" width="350" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: contrats -->
        <mxCell id="table-contrats" value="&lt;b style=&quot;font-size:12pt&quot;&gt;contrats&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— id_entite (FK â†’ entites.id)&#xa;ðŸ”— id_lot_technique (FK â†’ lots_technique.id)&#xa;contrat_pdf (BYTEA)&#xa;numero (VARCHAR(255) UNIQUE)&#xa;date_debut_validite (DATE)&#xa;date_fin_validite (DATE)&#xa;ðŸ”— id_note_technique (FK)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ CrÃ©Ã©s lors de la greffe&#xa;   (1 par entitÃ© gagnante)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="430" y="695" width="280" height="220" as="geometry" />
        </mxCell>
        
        <!-- TABLE: lot_contrat -->
        <mxCell id="table-lot-contrat" value="&lt;b style=&quot;font-size:12pt&quot;&gt;lot_contrat&lt;/b&gt;&#xa;âš ï¸ NOM CRITIQUE (PAS 'classements')&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— id_contrat (FK â†’ contrats.id)&#xa;ðŸ”— id_lot_departement (FK â†’ lots_departements)&#xa;rang (INTEGER CHECK IN (1, 2, 3))&#xa;ðŸ”— id_interlocuteur (FK â†’ interlocuteurs)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(id_lot_departement, rang)&#xa;   1 seul Rang 1 par LOT&#xa;ðŸ“ UtilisÃ© par Module Commandes&#xa;   pour attribution" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3CD;strokeColor=#D68910;strokeWidth=3;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="760" y="1000" width="280" height="240" as="geometry" />
        </mxCell>
        
        <!-- TABLE: interlocuteurs -->
        <mxCell id="table-interlocuteurs" value="&lt;b style=&quot;font-size:12pt&quot;&gt;interlocuteurs&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entreprise_id (FK â†’ entreprises.id)&#xa;nom (VARCHAR(255))&#xa;prenom (VARCHAR(255))&#xa;email (VARCHAR(255))&#xa;telephone (VARCHAR(20))&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ 1 par lot_contrat,&#xa;   reÃ§oit les commandes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1090" y="1000" width="280" height="190" as="geometry" />
        </mxCell>
        
        <!-- GROUPE: Support -->
        <mxCell id="groupe-support-label" value="ðŸ“˜ Groupe: Support" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#2874A6;" vertex="1" parent="1">
          <mxGeometry x="100" y="1280" width="250" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: adresses -->
        <mxCell id="table-adresses" value="&lt;b style=&quot;font-size:12pt&quot;&gt;adresses&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entreprise_id (FK â†’ entreprises.id)&#xa;adresse (TEXT)&#xa;code_postal (VARCHAR(10))&#xa;ville (VARCHAR(100))&#xa;pays (VARCHAR(2))" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="100" y="1320" width="280" height="150" as="geometry" />
        </mxCell>
        
        <!-- TABLE: presentations -->
        <mxCell id="table-presentations" value="&lt;b style=&quot;font-size:12pt&quot;&gt;presentations&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entreprise_id (FK â†’ entreprises.id)&#xa;texte_presentation (TEXT)&#xa;moyens_humains (TEXT)&#xa;chiffre_affaire (DECIMAL(12,2))" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="430" y="1320" width="280" height="150" as="geometry" />
        </mxCell>
        
        <!-- TABLE: iban -->
        <mxCell id="table-iban" value="&lt;b style=&quot;font-size:12pt&quot;&gt;iban&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entreprise_id (FK â†’ entreprises.id)&#xa;iban (VARCHAR(34))&#xa;bic (VARCHAR(11))" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#2874A6;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="760" y="1320" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- ========== AC_2027 TABLES ========== -->
        
        <!-- GROUPE: Candidatures -->
        <mxCell id="groupe-candidatures-label" value="ðŸ”¶ Groupe: Candidatures" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#D68910;" vertex="1" parent="1">
          <mxGeometry x="1700" y="250" width="300" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: accord_cadre_candidatures -->
        <mxCell id="table-candidatures" value="&lt;b style=&quot;font-size:12pt&quot;&gt;accord_cadre_candidatures&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— entite_id (BIGINT NOT NULL)&#xa;   âš ï¸ [CROSS-DB] â†’ core25.entites.id&#xa;ðŸ”— lot_technique_id (FK â†’ lots_technique)&#xa;status (VARCHAR(20) CHECK)&#xa;   IN ('draft', 'submitted',&#xa;       'accepted', 'rejected')&#xa;submitted_at (TIMESTAMP)&#xa;reviewed_at (TIMESTAMP)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(entite_id, lot_technique_id)&#xa;ðŸ“ 1 candidature = 1 lot technique&#xa;   + N dÃ©partements" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1700" y="285" width="320" height="260" as="geometry" />
        </mxCell>
        
        <!-- TABLE: candidature_lots_departements (PIVOT) -->
        <mxCell id="table-cand-lots-dept" value="&lt;b style=&quot;font-size:12pt&quot;&gt;candidature_lots_departements&lt;/b&gt;&#xa;(PIVOT)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK â†’ accord_cadre_candidatures)&#xa;ðŸ”— lot_departement_id (FK â†’ lots_departements)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(candidature_id, lot_departement_id)&#xa;ðŸ“ Snapshot dÃ©partements au moment&#xa;   de la soumission" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="2070" y="285" width="340" height="200" as="geometry" />
        </mxCell>
        
        <!-- GROUPE: Offres -->
        <mxCell id="groupe-offres-label" value="ðŸ”¶ Groupe: Offres" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#D68910;" vertex="1" parent="1">
          <mxGeometry x="1700" y="590" width="250" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: offres_techniques -->
        <mxCell id="table-offres-tech" value="&lt;b style=&quot;font-size:12pt&quot;&gt;offres_techniques&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK UNIQUE â†’ candidatures)&#xa;reponse_technique_besoin (TEXT NOT NULL)&#xa;moyens_humains_materiels (TEXT NOT NULL)&#xa;modes_operatoires (TEXT NOT NULL)&#xa;mesures_environnement (TEXT NOT NULL)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ“ NotÃ©e manuellement par admin&#xa;   (45% note finale)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1700" y="625" width="320" height="200" as="geometry" />
        </mxCell>
        
        <!-- TABLE: articles -->
        <mxCell id="table-articles" value="&lt;b style=&quot;font-size:12pt&quot;&gt;articles&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— lot_technique_id (FK â†’ lots_technique)&#xa;code (VARCHAR(20) NOT NULL)&#xa;nom (VARCHAR(255) NOT NULL)&#xa;description (TEXT)&#xa;unite (VARCHAR(50) NOT NULL)&#xa;seuil_a (DECIMAL(10,2))&#xa;seuil_b (DECIMAL(10,2))&#xa;actif (BOOLEAN DEFAULT TRUE)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ CHECK (seuil_a &lt; seuil_b)&#xa;ðŸ“ ImportÃ©s depuis Excel AVANT&#xa;   ouverture candidatures" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="2460" y="285" width="320" height="260" as="geometry" />
        </mxCell>
        
        <!-- TABLE: offres_financieres_prix -->
        <mxCell id="table-offres-fin" value="&lt;b style=&quot;font-size:12pt&quot;&gt;offres_financieres_prix&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK â†’ candidatures)&#xa;ðŸ”— article_id (FK â†’ articles)&#xa;ðŸ”— lot_departement_id (FK â†’ lots_departements)&#xa;prix_a (DECIMAL(10,2) NOT NULL)&#xa;prix_b (DECIMAL(10,2) NOT NULL)&#xa;prix_c (DECIMAL(10,2) NOT NULL)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ CHECK (prix_a &gt; prix_b AND prix_b &gt; prix_c)&#xa;   ðŸ’° DÃ‰GRESSIF: Plus j'achÃ¨te, MOINS cher&#xa;ðŸ”’ UNIQUE(candidature_id, article_id,&#xa;          lot_departement_id)&#xa;ðŸ“ N articles Ã— M dÃ©partements lignes&#xa;   (55% note finale)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="2070" y="530" width="340" height="295" as="geometry" />
        </mxCell>
        
        <!-- ANNOTATION PRICING -->
        <mxCell id="annot-pricing" value="ðŸ’° PRICING DÃ‰GRESSIF&#xa;prix_a &gt; prix_b &gt; prix_c&#xa;Plus j'achÃ¨te, MOINS c'est cher" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5F4E6;strokeColor=#118D57;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;fontFamily=Arial;" vertex="1" parent="1">
          <mxGeometry x="2460" y="625" width="260" height="80" as="geometry" />
        </mxCell>
        
        <!-- GROUPE: Ã‰valuation -->
        <mxCell id="groupe-eval-label" value="ðŸ”¶ Groupe: Ã‰valuation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=1;fontColor=#D68910;" vertex="1" parent="1">
          <mxGeometry x="1700" y="880" width="250" height="25" as="geometry" />
        </mxCell>
        
        <!-- TABLE: evaluations_techniques -->
        <mxCell id="table-eval-tech" value="&lt;b style=&quot;font-size:12pt&quot;&gt;evaluations_techniques&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK UNIQUE â†’ candidatures)&#xa;note_moyens_humains (DECIMAL(2,1)) /5&#xa;note_modes_operatoires (DECIMAL(2,1)) /4&#xa;note_mesures_environnement (DECIMAL(2,1)) /1&#xa;note_technique_totale (DECIMAL(3,1) GENERATED)&#xa;   /10 = 45%&#xa;evaluateur_id (BIGINT)&#xa;date_evaluation (TIMESTAMP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1700" y="915" width="320" height="200" as="geometry" />
        </mxCell>
        
        <!-- TABLE: evaluations_financieres -->
        <mxCell id="table-eval-fin" value="&lt;b style=&quot;font-size:12pt&quot;&gt;evaluations_financieres&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK â†’ candidatures)&#xa;ðŸ”— lot_departement_id (FK â†’ lots_departements)&#xa;montant_faux_devis (DECIMAL(12,2))&#xa;note_financiere (DECIMAL(3,1)) /10 = 55%&#xa;date_calcul (TIMESTAMP)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(candidature_id, lot_departement_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="2070" y="915" width="340" height="180" as="geometry" />
        </mxCell>
        
        <!-- TABLE: classements_candidatures -->
        <mxCell id="table-classements" value="&lt;b style=&quot;font-size:12pt&quot;&gt;classements_candidatures&lt;/b&gt;&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”‘ id (BIGSERIAL PK)&#xa;ðŸ”— candidature_id (FK â†’ candidatures)&#xa;ðŸ”— lot_departement_id (FK â†’ lots_departements)&#xa;note_totale (DECIMAL(4,2))&#xa;   45% tech + 55% fin&#xa;rang (SMALLINT CHECK IN (1, 2, 3))&#xa;date_attribution (TIMESTAMP)&#xa;â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•&#xa;ðŸ”’ UNIQUE(lot_departement_id, rang)&#xa;ðŸ“ CopiÃ© vers core27.lot_contrat&#xa;   lors de la greffe" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#D68910;strokeWidth=2;align=left;verticalAlign=top;fontSize=10;fontFamily=Arial;spacing=6;" vertex="1" parent="1">
          <mxGeometry x="1700" y="1160" width="320" height="210" as="geometry" />
        </mxCell>
        
        <!-- ========== RELATIONS INTRA-DB CORE27 ========== -->
        
        <!-- entreprises â†’ entites_entreprises -->
        <mxCell id="rel-1" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-entreprises" target="table-entites-entreprises">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entites â†’ entites_entreprises -->
        <mxCell id="rel-2" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-entites" target="table-entites-entreprises">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entreprises â†’ adresses -->
        <mxCell id="rel-3" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-entreprises" target="table-adresses">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entreprises â†’ presentations -->
        <mxCell id="rel-4" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-entreprises" target="table-presentations">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entreprises â†’ iban -->
        <mxCell id="rel-5" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-entreprises" target="table-iban">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entreprises â†’ interlocuteurs -->
        <mxCell id="rel-6" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-entreprises" target="table-interlocuteurs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_technique â†’ lots_departements -->
        <mxCell id="rel-7" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-lots-technique" target="table-lots-departements">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- departements â†’ lots_departements -->
        <mxCell id="rel-8" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-departements" target="table-lots-departements">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- entites â†’ contrats -->
        <mxCell id="rel-9" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-entites" target="table-contrats">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_technique â†’ contrats -->
        <mxCell id="rel-10" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-lots-technique" target="table-contrats">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- contrats â†’ lot_contrat -->
        <mxCell id="rel-11" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-contrats" target="table-lot-contrat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_departements â†’ lot_contrat -->
        <mxCell id="rel-12" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-lots-departements" target="table-lot-contrat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- interlocuteurs â†’ lot_contrat -->
        <mxCell id="rel-13" value="" style="endArrow=classic;html=1;strokeColor=#2874A6;strokeWidth=2;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-interlocuteurs" target="table-lot-contrat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ========== RELATIONS INTRA-DB AC_2027 ========== -->
        
        <!-- lots_technique â†’ accord_cadre_candidatures (CROSS-DB visual) -->
        <mxCell id="rel-ac-1" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lots-technique" target="table-candidatures">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ candidature_lots_departements -->
        <mxCell id="rel-ac-2" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="table-candidatures" target="table-cand-lots-dept">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_departements â†’ candidature_lots_departements (CROSS-DB visual) -->
        <mxCell id="rel-ac-3" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lots-departements" target="table-cand-lots-dept">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ offres_techniques -->
        <mxCell id="rel-ac-4" value="1:1" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-candidatures" target="table-offres-tech">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_technique â†’ articles (CROSS-DB visual) -->
        <mxCell id="rel-ac-5" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lots-technique" target="table-articles">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ offres_financieres_prix -->
        <mxCell id="rel-ac-6" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-candidatures" target="table-offres-fin">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- articles â†’ offres_financieres_prix -->
        <mxCell id="rel-ac-7" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-articles" target="table-offres-fin">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_departements â†’ offres_financieres_prix (CROSS-DB visual) -->
        <mxCell id="rel-ac-8" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lots-departements" target="table-offres-fin">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ evaluations_techniques -->
        <mxCell id="rel-ac-9" value="1:1" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-offres-tech" target="table-eval-tech">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ evaluations_financieres -->
        <mxCell id="rel-ac-10" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-offres-fin" target="table-eval-fin">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_departements â†’ evaluations_financieres (CROSS-DB visual) -->
        <mxCell id="rel-ac-11" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lots-departements" target="table-eval-fin">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- accord_cadre_candidatures â†’ classements_candidatures -->
        <mxCell id="rel-ac-12" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="table-eval-tech" target="table-classements">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- lots_departements â†’ classements_candidatures (CROSS-DB visual) -->
        <mxCell id="rel-ac-13" value="" style="endArrow=classic;html=1;strokeColor=#D68910;strokeWidth=2;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;dashed=0;" edge="1" parent="1" source="table-lot-contrat" target="table-classements">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ========== RELATION CROSS-DB PRINCIPALE ========== -->
        
        <!-- accord_cadre_candidatures.entite_id â†’ core25.entites.id -->
        <mxCell id="rel-crossdb-main" value="[CROSS-DB]&#xa;Validation applicative Laravel" style="endArrow=classic;html=1;strokeColor=#E74C3C;strokeWidth=3;exitX=0;exitY=0.2;exitDx=0;exitDy=0;entryX=1;entryY=0.2;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;edgeStyle=orthogonalEdgeStyle;fontSize=11;fontStyle=1;fontColor=#C0392B;" edge="1" parent="1" source="table-candidatures" target="table-entites">
          <mxGeometry x="-0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel-crossdb-note" value="Pendant candidatures: rÃ©fÃ©rence core25&#xa;AprÃ¨s greffe: entitÃ© existe dans core27" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;fontColor=#E74C3C;" vertex="1" parent="1">
          <mxGeometry x="1250" y="370" width="280" height="40" as="geometry" />
        </mxCell>
        
        <!-- ========== LÃ‰GENDE ========== -->
        
        <mxCell id="legende-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8F9FA;strokeColor=#34495E;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="2100" width="1500" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="legende-titre" value="ðŸ“Š LÃ‰GENDE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#2C3E50;" vertex="1" parent="1">
          <mxGeometry x="80" y="2120" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legende-content" value="ðŸ“˜ CORE27 (Permanente 2027-2029) - Profils, entitÃ©s, contrats, classements&#xa;ðŸ”¶ AC_2027 (Temporaire 3 mois) - Candidatures, offres, Ã©valuation&#xa;&#xa;ðŸ”‘ = ClÃ© Primaire (PK)&#xa;ðŸ”— = ClÃ© Ã‰trangÃ¨re (FK)&#xa;ðŸ”’ = Contrainte (UNIQUE, CHECK, Trigger)&#xa;&#xa;â€•â€•â€•â€• = Relation intra-DB (mÃªme base de donnÃ©es)&#xa;â”„â”„â”„â”„ = Relation cross-DB (validation applicative Laravel)&#xa;&#xa;ZONES COLORÃ‰ES:&#xa;â€¢ Zone bleue (gauche): Tables CORE27 - Base permanente avec profils, contrats et classements&#xa;â€¢ Zone orange (droite): Tables AC_2027 - Base temporaire avec candidatures et Ã©valuation&#xa;&#xa;FLUX DE GREFFE:&#xa;â€¢ ac_2027.classements_candidatures (Rang 1-3) â†’ core27.lot_contrat&#xa;â€¢ ac_2027.entites (gagnantes uniquement) â†’ core27.entites&#xa;â€¢ CrÃ©ation automatique des contrats lors de la greffe" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Arial;spacing=4;" vertex="1" parent="1">
          <mxGeometry x="80" y="2160" width="1400" height="140" as="geometry" />
        </mxCell>
        
        <!-- ANNOTATION LOT_CONTRAT -->
        <mxCell id="annot-lot-contrat" value="âš ï¸ ATTENTION NOM CRITIQUE&#xa;Cette table s'appelle 'lot_contrat'&#xa;(PAS 'classements')&#xa;UtilisÃ©e par module Commandes (BDC)&#xa;pour attribution automatique" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FADBD8;strokeColor=#C0392B;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;fontFamily=Arial;" vertex="1" parent="1">
          <mxGeometry x="1090" y="1260" width="280" height="110" as="geometry" />
        </mxCell>
        
        <!-- FlÃ¨che annotation vers lot_contrat -->
        <mxCell id="arrow-annot-lot-contrat" value="" style="endArrow=classic;html=1;strokeColor=#C0392B;strokeWidth=2;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="annot-lot-contrat" target="table-lot-contrat">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>